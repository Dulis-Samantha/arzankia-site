<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="robots" content="noindex" />
<title>Monde des Artistes ‚Äì Arzankia</title>

<style>
  :root{
    --or:#ffd674;
    --ivoire:#fff8e6;
    --verre:rgba(10,0,20,.45);
    --bord:rgba(255,214,116,.55);
    --ray:28px;
  }

  /* ===== Fond + voile ===== */
  body{
    margin:0;
    font-family:Georgia, serif;
    color:var(--ivoire);
    background:url('fond_monde_terre.png') center/cover no-repeat fixed;
    min-height:100svh;
    display:flex; flex-direction:column; align-items:center; justify-content:flex-start;
    padding:clamp(16px,3vw,48px);
    position:relative; isolation:isolate; overflow-x:hidden;
  }
  body::before{
    content:""; position:absolute; inset:0; z-index:-1;
    background:linear-gradient(180deg, rgba(10,0,20,.55), rgba(0,0,0,.25) 30%, rgba(0,0,0,.35) 70%, rgba(10,0,20,.6));
  }

  /* Canvas feux d‚Äôartifice + calque des notes */
  .fx-canvas{ position:fixed; inset:0; z-index:0; pointer-events:none; }
  .fx-layer { position:fixed; inset:0; z-index:1; pointer-events:none; overflow:hidden; }

  /* Contenu */
  .wrap{ max-width:1100px; width:100%; text-align:center; position:relative; z-index:2; margin-top:clamp(1rem,4vh,2.5rem); }

  /* Titres */
  h1{
    margin:0 0 .6rem; line-height:1.1;
    font-size:clamp(2.2rem,6vw,4rem); color:var(--or);
    text-shadow:0 3px 0 rgba(0,0,0,.35), 0 0 24px rgba(255,214,116,.25);
  }
  .soustitre{ font-size:clamp(.95rem,2.4vw,1.05rem); letter-spacing:.06em; opacity:.9; margin-bottom:1.2rem; }

  .section-title{
    margin:1.2rem auto .6rem;
    font-size:clamp(1.1rem,2.3vw,1.4rem);
    letter-spacing:.04em; opacity:.95;
  }
  .section-title::after{
    content:""; display:block; width:120px; height:2px; margin:.5rem auto 0;
    background:linear-gradient(90deg, transparent, var(--or), transparent);
    border-radius:999px; box-shadow:0 0 10px rgba(255,214,116,.35);
  }

  /* Cadre √©l√©gant pour la citation */
  .cartouche{ margin:0 auto 1.6rem; max-width:980px; }
  .gold-frame{
    position:relative; padding:clamp(18px, 3vw, 26px); border-radius:26px;
    background:
      radial-gradient(140% 160% at 20% 0%, rgba(255,255,255,.10), rgba(255,255,255,0) 40%),
      radial-gradient(140% 160% at 80% 100%, rgba(255,255,255,.08), rgba(255,255,255,0) 45%),
      linear-gradient(180deg, rgba(25,5,35,.68), rgba(15,0,20,.68));
    backdrop-filter: blur(7px) saturate(110%);
    box-shadow: 0 18px 40px rgba(0,0,0,.35), inset 0 0 30px rgba(255,255,255,.03);
  }
  .gold-frame::before{
    content:""; position:absolute; inset:0; border-radius:inherit; padding:1px;
    background:linear-gradient(135deg,#ffe8ae,#fff7dc 35%,#ffd674 65%,#ffdba2);
    -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
    -webkit-mask-composite:xor; mask-composite:exclude;
    box-shadow:0 0 20px rgba(255,214,116,.28); pointer-events:none;
  }
  .gold-frame::after{
    content:""; position:absolute; inset:-8% -35%; border-radius:inherit;
    background:linear-gradient(100deg, transparent 42%, rgba(255,255,255,.10) 50%, transparent 58%);
    transform:translateX(-60%) rotate(7deg);
    animation:glare 10s linear infinite; pointer-events:none;
  }
  @keyframes glare{ 0%{transform:translateX(-60%) rotate(7deg);} 100%{transform:translateX(60%) rotate(7deg);} }
  .citation{
    margin:0; font-size:clamp(1.06rem,2.6vw,1.45rem); line-height:1.9;
    text-shadow:0 1px 0 rgba(0,0,0,.35);
  }
  .citation .guil{ color:var(--or); font-size:1.4em; text-shadow:0 0 10px rgba(255,214,116,.35); }

  /* Boutons */
  .btn{
    display:inline-flex; align-items:center; justify-content:center; gap:.6rem;
    text-decoration:none; color:var(--ivoire); padding:14px 18px; border-radius:999px;
    border:1px solid var(--bord); background:rgba(0,0,0,.35);
    transition:.25s ease; font-size:1.05rem; box-shadow:0 4px 18px rgba(0,0,0,.25);
    margin:.4rem .35rem;
  }
  .btn:hover{ transform:translateY(-2px); box-shadow:0 10px 24px rgba(0,0,0,.35); }
  .shop{ font-weight:700; border:1px solid var(--or);
    background:linear-gradient(180deg, rgba(255,214,116,.18), rgba(255,214,116,.06));
  }

  .btn-row{ display:flex; flex-wrap:wrap; justify-content:center; margin:.2rem auto 1rem; }
  .ico{
    width:32px; height:32px; border-radius:50%; display:grid; place-items:center; flex:0 0 auto;
    background:radial-gradient(circle at 30% 30%, #ffecb3, #f3c86a); color:#5a2e00;
    box-shadow:inset 0 0 8px rgba(0,0,0,.25), 0 0 12px rgba(255,214,116,.35); font-size:18px;
  }
  .ico.purple{ background:radial-gradient(circle at 30% 30%, #e8d9ff, #b58cff); color:#2a103f; }

  /* (S√©curit√©) d√©sactive d‚Äôanciens styles de notes auto */
  .fx-note{ display:none !important; }

  /* Notes ‚Äúvivantes‚Äù ‚Äî 20 en continu */
  .note{
    position:absolute; will-change:transform, opacity;
    filter:drop-shadow(0 3px 8px rgba(0,0,0,.45));
    font-size: clamp(22px, 2.8vw, 36px);
    opacity:0; transform:translate(-50%, -50%) scale(.9) rotate(0deg);
    transition: opacity .6s ease; user-select:none; pointer-events:none;
  }

  @media (prefers-reduced-motion: reduce){
    .fx-canvas{ display:none !important; }
    .note{ display:none !important; }
  }
</style>
</head>
<body>
  <!-- Feux d‚Äôartifice -->
  <canvas class="fx-canvas" aria-hidden="true"></canvas>
  <!-- Notes -->
  <div class="fx-layer" id="notes-layer" aria-hidden="true"></div>

  <main class="wrap">
    <h1>Monde des Artistes</h1>
    <div class="soustitre">Cr√©ation ‚Ä¢ Harmonie ‚Ä¢ Lumi√®re</div>

    <!-- Cadre citation -->
    <section class="cartouche">
      <div class="gold-frame">
        <p class="citation">
          <span class="guil">¬´</span>
          Ici, les notes dansent, les couleurs vibrent,
          et d‚Äô√©tranges cr√©atures laissent exprimer leur talent √† la lumi√®re‚Ä¶
          <span class="guil">¬ª</span>
        </p>
      </div>
    </section>

    <!-- 1er rang : Entr√©e & Extrait -->
    <div class="btn-row">
      <a class="btn" href="9.entree_Artistes.html">Entr√©e du monde</a>
      <a class="btn" href="7.extrait_Artistes.html">Extrait du livre</a>
    </div>

    <!-- 2e rang : Titre + boutiques -->
    <div class="section-title">La place des artistes</div>
    <div class="btn-row">
      <a class="btn shop" href="chanson_de_camidjo.html"><span class="ico">üéµ</span> Camidjo</a>
      <a class="btn shop" href="loup_bout_art.html"><span class="ico purple">üé®</span> Loup-Bout'Art</a>
    </div>

    <!-- Retour -->
    <div class="btn-row">
      <a class="btn" href="3.les_mondes.html">‚Üê Retour aux Mondes</a>
    </div>
  </main>

<!-- ===== Feux d‚Äôartifice : grosses explosions, glitter, s√©quen√ßage irr√©gulier ===== -->
<script>
(function(){
  const c = document.querySelector('.fx-canvas');
  const ctx = c.getContext('2d', { alpha: true });
  let dpr = Math.max(1, window.devicePixelRatio || 1), W, H;

  function resize(){
    dpr = Math.max(1, window.devicePixelRatio || 1);
    W = Math.floor(innerWidth * dpr);
    H = Math.floor(innerHeight * dpr);
    c.width = W; c.height = H;
    c.style.width = innerWidth + 'px';
    c.style.height = innerHeight + 'px';
    ctx.globalCompositeOperation = 'lighter';
  }
  resize(); addEventListener('resize', resize, { passive:true });

  const reduce = matchMedia('(prefers-reduced-motion: reduce)').matches;
  if (reduce) return;

  // Palettes voulues + mode arc-en-ciel
  const fixedHues = {
    bleu: 210, vert: 120, rouge: 0, orange: 30, violet: 270, rose: 320, jaune: 55
  };
  const fixedPalette = Object.values(fixedHues);

  function makePalette(){
    // 70% chance palette fixe choisie, 30% arc-en-ciel
    if (Math.random() < 0.7){
      const h = fixedPalette[Math| (Math.random()*fixedPalette.length)];
      // l√©g√®re variation de teinte pour √©tincelles
      return Array.from({length:10}, (_,i)=> `hsl(${h + (i-5)*2} 95% 60%)`);
    } else {
      return Array.from({length:12}, (_,i)=> `hsl(${(i/12)*360} 90% 58%)`); // arc-en-ciel
    }
  }

  const fireworks = [];
  const MAX_FWS = 6; // limite s√©curit√©

  function spawnFirework(){
    if (fireworks.length >= MAX_FWS) return;

    // position d‚Äôexplosion (pas trop bas)
    const x = (0.08 + Math.random()*0.84) * W;
    const y = (0.08 + Math.random()*0.62) * H;

    // "grosses" explosions -> beaucoup de particules, vitesse mod√©r√©e
    const parts = Math.floor(140 + Math.random()*120);
    const speed = (1.1 + Math.random()*0.7) * dpr; // lente
    const palette = makePalette();
    const style = Math.random(); // diff√©rents motifs

    const fw = { x, y, parts:[], life:0, max: 110 + Math.random()*60, palette, glitter:[], gtimer:0 };

    for(let i=0;i<parts;i++){
      const a = (i/parts) * Math.PI * 2;
      let r = 1, vx, vy;

      // styles vari√©s: anneau, fleur modul√©e, palmier/ellipse
      if (style < 0.33){ r = 1; }
      else if (style < 0.66){ r = 1.2 + 0.4*Math.sin(a*6); }
      else { r = 0.85 + 0.35*Math.sin(a*2); }

      vx = Math.cos(a) * speed * r;
      vy = Math.sin(a) * speed * r * (style>0.66 ? 0.7 : 1);

      fw.parts.push({
        x, y,
        vx, vy,
        alpha: 1,
        col: palette[i % palette.length],
        // persistance lente
        decay: 0.985 - Math.random()*0.004
      });
    }
    fireworks.push(fw);
  }

  // S√©quen√ßage irr√©gulier (intervalles variables + mini salves)
  function scheduleNext(){
    const base = 600 + Math.random()*1800; // 0.6s‚Äì2.4s
    setTimeout(()=>{
      // parfois 2‚Äì3 explosions rapproch√©es
      const bursts = Math.random() < 0.35 ? (2 + Math.floor(Math.random()*2)) : 1;
      for (let i=0;i<bursts;i++){
        setTimeout(()=>spawnFirework(), i* (150 + Math.random()*220));
      }
      scheduleNext();
    }, base);
  }
  scheduleNext();

  function step(){
    // effacement doux pour tra√Æn√©es persistantes
    ctx.globalCompositeOperation = 'destination-out';
    ctx.fillStyle = 'rgba(0,0,0,0.08)';
    ctx.fillRect(0,0,W,H);
    ctx.globalCompositeOperation = 'lighter';

    // dessine chaque feu d‚Äôartifice
    for (let i=fireworks.length-1; i>=0; i--){
      const fw = fireworks[i];
      fw.life++;

      // particules principales (tra√Æn√©es)
      for (const p of fw.parts){
        // gravit√© tr√®s l√©g√®re + frottements => lenteur
        p.vy += 0.006 * dpr;
        p.vx *= 0.996; p.vy *= 0.996;

        const px = p.x, py = p.y;
        p.x += p.vx; p.y += p.vy;
        p.alpha *= p.decay;

        // trait (trail)
        ctx.globalAlpha = Math.max(0, p.alpha);
        ctx.strokeStyle = p.col; ctx.lineWidth = 1.3 * dpr;
        ctx.beginPath();
        ctx.moveTo(p.x, p.y);
        ctx.lineTo(px, py);
        ctx.stroke();

        // scintillement (glitter) : petites √©tincelles br√®ves
        if (Math.random() < 0.08){
          fw.glitter.push({
            x: p.x, y: p.y,
            vx: (Math.random()-0.5)*0.6*dpr,
            vy: (Math.random()-0.5)*0.6*dpr,
            alpha: 0.9, col: p.col
          });
        }
      }

      // √©tincelles (points lumineux courts)
      for (let gi=fw.glitter.length-1; gi>=0; gi--){
        const g = fw.glitter[gi];
        g.vy += 0.004*dpr;
        g.x += g.vx; g.y += g.vy;
        g.alpha *= 0.86;

        ctx.globalAlpha = Math.max(0, g.alpha);
        ctx.fillStyle = g.col;
        ctx.beginPath();
        ctx.arc(g.x, g.y, 0.9*dpr, 0, Math.PI*2);
        ctx.fill();

        if (g.alpha < 0.04) fw.glitter.splice(gi,1);
      }

      if (fw.life > fw.max) fireworks.splice(i,1);
    }

    requestAnimationFrame(step);
  }
  requestAnimationFrame(step);
})();
</script>

<!-- ===== Notes ‚Äúvivantes‚Äù : 20 visibles en continu ===== -->
<script>
(function(){
  if (window.__notesInit) return; // √©vite double init
  window.__notesInit = true;

  const L = document.getElementById('notes-layer');
  if(!L) return;
  const reduce = matchMedia('(prefers-reduced-motion: reduce)').matches;
  if(reduce) return;

  // Reset
  L.querySelectorAll('.note, .fx-note').forEach(n => n.remove());

  const POOL_SIZE = 20; // ‚Üê 20 visibles en continu
  const glyphs   = ['‚ô™','‚ô´','üéµ','üé∂'];
  const notes = [];

  const rand = (a,b)=> Math.random()*(b-a)+a;
  const pick = (a)=> a[Math.floor(Math.random()*a.length)];

  function spawnOne(){
    if (notes.length >= POOL_SIZE) return;

    const el = document.createElement('span');
    el.className = 'note';
    el.textContent = pick(glyphs);
    L.appendChild(el);

    const n = {
      el,
      x: rand(0, innerWidth),
      y: rand(0, innerHeight),
      vx: rand(-0.22, 0.22), // vitesse moyenne
      vy: rand(-0.16, 0.16),
      rot: rand(-18, 18),
      life: 0,
      maxLife: rand(8,13)*60,   // ~8‚Äì13 s
      scale: rand(0.8,1.4)      // tailles vari√©es
    };
    el.style.opacity = '0';
    requestAnimationFrame(()=> el.style.opacity = '1');
    notes.push(n);
  }

  // Remplissage initial √† 20
  for (let i=0; i<POOL_SIZE; i++) spawnOne();

  function tick(){
    for (let i=notes.length-1; i>=0; i--){
      const n = notes[i];
      n.life++;

      // petit drift organique
      n.vx += Math.random()*0.014 - 0.007;
      n.vy += Math.random()*0.010 - 0.005;

      n.x += n.vx;
      n.y += n.vy;
      n.rot += (n.vx + n.vy)*0.25;

      // rebonds doux bords (pour rester "partout")
      if (n.x < 0 || n.x > innerWidth)  n.vx *= -1;
      if (n.y < 0 || n.y > innerHeight) n.vy *= -1;

      n.el.style.transform = `translate(${n.x}px, ${n.y}px) rotate(${n.rot}deg) scale(${n.scale})`;

      // disparition / respawn ailleurs pour rester √† 20
      if (n.life > n.maxLife){
        n.el.style.opacity = '0';
        setTimeout(() => {
          n.el.remove();
          notes.splice(i,1);
          spawnOne();
        }, 400);
      }
    }
    requestAnimationFrame(tick);
  }
  requestAnimationFrame(tick);

  // ajuster positions si resize
  addEventListener('resize', ()=>{
    notes.forEach(n=>{
      n.x = Math.min(Math.max(n.x, 0), innerWidth);
      n.y = Math.min(Math.max(n.y, 0), innerHeight);
    });
  }, { passive:true });
})();
</script>

</body>
</html>
