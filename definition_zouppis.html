<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Définition de Zouppis</title>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=IM+Fell+English+SC&display=swap" rel="stylesheet">

  <style>
    
    html, body {
      margin: 0;
      background-image: url('feuille_grimoire.png');
      background-size: cover;
      background-position: center;
      font-family: 'IM Fell English SC', serif;
      color: #4b2e00;
      text-align: center;
    }

    .parchemin-wrapper {
      max-width: 800px;
      margin: 60px auto;
      padding: 60px 40px;
    }

    ..titre-lexique {
  font-family: 'Cinzel', serif;
  font-size: 2.6rem;
  font-weight: bold;
  text-transform: uppercase;
  margin-bottom: 25px;
  opacity: 0;
  transition: opacity 2s ease-in-out;
  transform: scale(0.6); /* position de départ pour zoom */
}

.titre-lexique.visible {
  opacity: 1;
  animation: glitterTitle 2s infinite alternate, zoomIn 1.5s ease-out forwards;

}

    @keyframes zoomIn {
  0% { transform: scale(0.6); }
  100% { transform: scale(1); }
}

@keyframes glitterTitle {
  0% { text-shadow: 0 0 6px #fff7cc, 0 0 10px #ffd700; }
  50% { text-shadow: 0 0 12px #fffbe6, 0 0 20px #ffeb3b; }
  100% { text-shadow: 0 0 6px #fff7cc, 0 0 10px #ffd700; }
}


    @keyframes glitter {
      0% { text-shadow: 0 0 3px #fff2cc, 0 0 6px #ffd; }
      50% { text-shadow: 0 0 8px #fffbe6, 0 0 12px #ffd700; }
      100% { text-shadow: 0 0 3px #fff2cc, 0 0 6px #ffd; }
    }

    @keyframes floatMagic {
      0% { transform: translateY(0); }
      50% { transform: translateY(-3px); }
      100% { transform: translateY(0); }
    }

    .texte-aleatoire span {
      opacity: 0;
      display: inline-block;
      transform: translate(0px, 0px) rotate(0deg);
      transition: transform 1s ease-out, opacity 1.2s ease-out;
      position: relative;
    }

    .texte-aleatoire span.visible {
      opacity: 1;
      transform: translate(0, 0) rotate(0);
      animation: glitter 1.8s infinite ease-in-out, floatMagic 3s infinite ease-in-out;
    }

    .sparkle {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 4px;
      height: 4px;
      background: white;
      border-radius: 50%;
      box-shadow: 0 0 6px 2px #fff7cc;
      animation: sparkle 0.8s ease-out forwards;
      pointer-events: none;
      z-index: 2;
    }

    @keyframes sparkle {
      0% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
      }
      100% {
        opacity: 0;
        transform: translate(-50%, -50%) scale(2.5);
      }
    }
  </style>
</head>
<body>

  <div class="parchemin-wrapper">
    <div class="titre-lexique" id="titreLexique">ZOUPPIS</div>
    <div class="texte-aleatoire" id="lexiqueContainer"></div>
  </div>

  <script>
    window.onload = function () {
      const texte = `
✧
Il y a bien longtemps, sur Terre, les druides se réunissaient en secret pour percer les mystères de la nature et partager leurs formules de potions magiques. 
Lors de grandes assemblées, ils se défiaient amicalement, organisant des concours où les idées les plus originales et puissantes étaient célébrées et transmises.
✧
Mais un jour, la magie commença à effrayer les hommes. Les murmures se firent menaces : on accusa les druides de sorcellerie, on les chassa, on les traqua… certains furent même brûlés vifs pour avoir osé protéger leur savoir.
Conscients de la fin imminente de leur ordre, les derniers druides tinrent une ultime grande réunion. 
Ce jour-là, ils unirent leurs forces pour créer un lieu merveilleux : un monde invisible aux yeux des humains, façonné par leurs rituels et leur volonté farouche de préserver la connaissance.
✧
Le tout premier monde magique. 
Ils bâtirent ce refuge pour pouvoir se retrouver en paix, loin de la peur et de la haine.
Là, ils firent naître de petites créatures éternelles, façonnées pour garder vivante la mémoire des druides.
✧
Les Zouppis. 
Ces petits gardiens devinrent les protecteurs des savoirs anciens : experts en potions, en plantes rares, en traditions oubliées. 
Même lorsque les druides disparurent peu à peu de la surface du monde, les Zouppis continuèrent d’exister, préservant leur héritage et veillant sur leurs secrets.
✧
Ce monde, premier de tous les mondes magiques, est encore aujourd’hui connu sous le nom de Brocéliande : une terre de brumes et de mystères, refuge des Zouppis, et mémoire vivante d’un savoir ancien qui refuse de s’éteindre.
✧`;

      const motsPrioritaires = ["magique", "merveilleux", "refuge", "druides", "Zouppis"];
      const container = document.getElementById("lexiqueContainer");
      const lignes = texte.trim().split('\n');
      const allSpans = [];

      lignes.forEach(ligne => {
        const p = document.createElement("p");
        container.appendChild(p);

        ligne.trim().split(/\s+/).forEach(mot => {
          const cleanMot = mot.replace(/[^\wÀ-ÿœŒ’-]/g, "");
          const span = document.createElement("span");
          span.textContent = mot;
          span.dataset.motclean = cleanMot.toLowerCase();
          p.appendChild(span);
          p.append(" ");
          allSpans.push(span);
        });
      });

      const premiers = [], restants = [];

      allSpans.forEach(span => {
        if (motsPrioritaires.includes(span.dataset.motclean)) {
          premiers.push(span);
        } else {
          restants.push(span);
        }
      });

      const melange = restants.sort(() => Math.random() - 0.5);
      const ordreFinal = [...premiers, ...melange];

      ordreFinal.forEach((span, i) => {
        const x = (Math.random() - 0.5) * 80;
        const y = (Math.random() - 0.5) * 60;
        const angle = (Math.random() - 0.5) * 20;
        span.style.transform = `translate(${x}px, ${y}px) rotate(${angle}deg)`;

        // Attendre la fin des apparitions pour afficher le titre
const dureeTotale = ordreFinal.length * 90 + 1000;
setTimeout(() => {
  document.getElementById("titreLexique").classList.add("visible");
}, dureeTotale);


        setTimeout(() => {
          span.classList.add("visible");

          // Étincelle centrale
          const sparkle = document.createElement("div");
          sparkle.className = "sparkle";
          span.appendChild(sparkle);
          setTimeout(() => sparkle.remove(), 800);

          // Étincelles supplémentaires aléatoires
          if (Math.random() < 0.3) {
            for (let j = 0; j < 2; j++) {
              const extra = document.createElement("div");
              extra.className = "sparkle";
              extra.style.top = `${Math.random() * 100}%`;
              extra.style.left = `${Math.random() * 100}%`;
              extra.style.width = "3px";
              extra.style.height = "3px";
              extra.style.animationDuration = "1.2s";
              span.appendChild(extra);
              setTimeout(() => extra.remove(), 1200);
            }
          }
        }, i * 90);
      });
    };
  </script>

</body>
</html>
