<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="robots" content="noindex" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Esteban ‚Äì H√©ros d‚ÄôArzankia</title>

  <style>
    :root{
      --or:#ffd700;
      --fond:#1b0f2f;
      --texte:#fff8e6;
      --ombre:#000;
      --parch-texte:#3b2a1d;
      --btn-bg:#fff8cc;
      --btn-bg-hover:#fff2b0;
    }

    body{
      margin:0;
      padding:0;
      background:url('fond_etoile_perso.webp') center top no-repeat;
      background-color:var(--fond);
      background-size:cover;
      font-family:Georgia, serif;
      color:var(--texte);
      text-shadow:1px 1px 4px var(--ombre);
    }

    .container{
      max-width:1200px;
      margin:auto;
      padding:1.5rem;
      text-align:center;
    }

    h1{
      font-size:2.6rem;
      color:var(--or);
      text-shadow:0 0 10px #3a1c00;
      margin:0.2rem 0 0.3rem;
      text-align:center;
    }

    .archives{
      margin:0 0 1.5rem;
      line-height:1.4;
      text-align:center;
    }
    .archives q { font-style:italic; }
    .archives .signature{
      display:block;
      margin-top:0.4rem;
      font-size:0.9rem;
      opacity:0.8;
    }

    /* ====== Layout principal (comme Rapha√´l) ====== */
    .hero-layout{
      display:block;
      margin-top:0.5rem;
    }

    .right-col{
      max-width:800px;
      margin:0 auto;
    }

    /* Parchemin / cadre contenu */
    .parchemin{
      background:url('parchemin_fond.png') center center no-repeat;
      background-size:contain;
      background-color:rgba(255,248,230,0.85);
      color:var(--parch-texte);
      text-shadow:none;
      border-radius:16px;
      box-shadow:0 0 30px rgba(255,240,200,0.5);
      padding:1rem;
      font-size:0.95rem;
      line-height:1.4;
      margin:0 auto 1.5rem;
      overflow:hidden;
    }
    .parchemin p{ margin:0.4rem 0; }

    /* ====== Carte portrait ‚Äúflip‚Äù √† gauche ====== */
    .card-flip{
      perspective:1000px;
      width:min(86vw, 700px);
      aspect-ratio:3/4;
      margin:.8rem auto 1.2rem;
      border-radius:12px;
      box-shadow:0 0 20px rgba(255,248,230,.5);
    }
    .card-inner{
      position:relative;
      width:100%;
      height:100%;
      transition:transform .8s;
      transform-style:preserve-3d;
      border-radius:12px;
    }
    .card-front, .card-back{
      position:absolute;
      inset:0;
      backface-visibility:hidden;
      border-radius:12px;
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
    }
    .card-front{
      background:rgba(255,248,230,0.85);
      color:#3b2a1d;
    }
    .card-front span{
      font-size:8rem;
      font-weight:900;
      line-height:1;
      text-shadow:1px 1px 3px #000;
      filter:drop-shadow(0 3px 8px rgba(0,0,0,.25));
    }
    .card-back{
      transform:rotateY(180deg);
      background:#000;
    }
    .card-back img{
      width:100%;
      height:100%;
      object-fit:cover;
    }
    /* √©tat r√©v√©l√© */
    .revealed .card-inner{ transform:rotateY(180deg); }

    /* ====== Quiz (dans le parchemin de droite) ====== */
    .quiz .question{ margin:0 0 1.2em; }
    .quiz .question p{
      margin:.2em 0 .6em;
      font-weight:700;
      color:#3b2a1d;
    }
    .quiz .question button{
      margin:.25em;
      padding:.6em 1.1em;
      border:none;
      border-radius:8px;
      background:#ffe18a;
      color:#2a2416;
      font-family:Georgia, serif;
      cursor:pointer;
      transition:transform .15s ease, filter .15s ease;
    }
    .quiz .question button:hover{
      transform:translateY(-1px);
      filter:saturate(1.05);
    }

    #estebanInfo{
      display:none;
      margin-top:1rem;
      background:rgba(255,248,230,.92);
      padding:1rem;
      border-radius:12px;
      box-shadow:0 0 18px rgba(0,0,0,.15) inset;
    }
    #success-message{
      display:none;
      color:#7a5b00;
      font-weight:bold;
      text-align:center;
      margin-top:1rem;
    }
    #replay-button{
      display:none;
      margin-top:1rem;
      text-align:center;
    }
    #replay-button button{
      padding:.7em 1.5em;
      background-color:#ffe18a;
      border:none;
      border-radius:8px;
      font-family:Georgia, serif;
      font-size:1em;
      cursor:pointer;
      box-shadow:0 0 10px #ffd700;
    }

    /* ====== Boutons dor√©s (m√™mes que Rapha√´l) ====== */
    .back-button{
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:1rem;
      margin:0 auto 2rem;
      width:100%;
      max-width:260px;
    }
    .back-button a{
      --gold-1:#fff5c7; --gold-2:#f3e3a0; --gold-3:#e2d289;
      --edge:#d9c889;   --shadow:rgba(0,0,0,.28);
      position:relative; display:inline-flex; align-items:center; justify-content:center;
      gap:.6rem; width:100%;
      padding:.95em 1.4em; border-radius:15px;
      background:linear-gradient(180deg, var(--gold-1), var(--gold-2) 55%, var(--gold-3));
      border:1px solid var(--edge);
      box-shadow:0 10px 22px var(--shadow),
                 inset 0 1px 0 rgba(255,255,255,.75),
                 inset 0 -2px 6px rgba(0,0,0,.08);
      color:#2a2416; text-decoration:none; font-weight:800; letter-spacing:.2px;
      text-shadow:0 1px 0 rgba(255,255,255,.55);
      transition:transform .15s ease, box-shadow .15s ease, filter .15s ease;
    }
    .back-button a:hover{
      transform:translateY(-2px);
      box-shadow:0 14px 28px rgba(255,248,198,.35),
                 inset 0 1px 0 rgba(255,255,255,.85),
                 inset 0 -3px 10px rgba(0,0,0,.08);
      filter:saturate(1.05);
    }

    /* ‚Äî‚Äî‚Äî Desktop : 2 colonnes identiques √† Rapha√´l ‚Äî‚Äî‚Äî */
    @media (min-width:900px){
      .hero-layout{
        display:flex;
        align-items:flex-start;
        gap:2rem;
      }
      .card-flip{
        width:30%;
        max-width:560px;
        margin:0;
        margin-left:130px; /* m√™me recul que l'image de Rapha√´l */
      }
      .right-col{
        flex:1;
        max-width:400px;
      }
      .parchemin{
        max-width:460px;
        padding:2rem 1.8rem;
        font-size:1.05rem;
        line-height:1.6;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Esteban</h1>

    <p class="archives">
      <q>Certains liens sont si puissants qu‚Äôils n‚Äôont pas besoin de mots pour √™tre compris.</q>
      <span class="signature">‚Äî Archives de la Tour de l‚ÄôAube ‚Äî</span>
    </p>

    <section class="hero-layout">
      <!-- Carte portrait √† gauche (se retourne √† la fin du quiz) -->
      <div class="card-flip" id="cardFlip">
        <div class="card-inner" id="estebanCard">
          <div class="card-front"><span>?</span></div>
          <div class="card-back">
            <img src="photo_esteban.webp" alt="Portrait d‚ÄôEsteban">
          </div>
        </div>
      </div>

      <!-- Colonne droite : parchemin + quiz -->
      <div class="right-col">
        <div class="parchemin quiz">
          <p><strong>üí´ D√©verrouille le portrait d‚ÄôEsteban</strong></p>
          <p>R√©ponds aux 6 questions pour r√©v√©ler son portrait et ses secrets.</p>

          <!-- === Quiz (inchang√©) === -->
          <div id="q1" class="question">
            <p>Quel est l‚Äô√¢ge d‚ÄôEsteban lorsqu'il voit Rapha√´l pour la premi√®re fois ?</p>
            <button onclick="checkAnswer('q1', true)">13 ans</button>
            <button onclick="checkAnswer('q1', false)">12 ans</button>
            <button onclick="checkAnswer('q1', false)">14 ans</button>
          </div>

          <div id="q2" class="question">
            <p>De quel monde vient Esteban ?</p>
            <button onclick="checkAnswer('q2', false)">Monde des Quacks</button>
            <button onclick="checkAnswer('q2', true)">Monde des Yakkas</button>
            <button onclick="checkAnswer('q2', false)">Monde d‚ÄôArenyth</button>
          </div>

          <div id="q3" class="question">
            <p>Comment s'appelle sa dragonne ?</p>
            <button onclick="checkAnswer('q3', false)">Zyra</button>
            <button onclick="checkAnswer('q3', true)">Mililou</button>
            <button onclick="checkAnswer('q3', false)">Brisella</button>
          </div>

          <div id="q4" class="question">
            <p>Qui est le fr√®re d'Esteban ?</p>
            <button onclick="checkAnswer('q4', false)">Kelyan</button>
            <button onclick="checkAnswer('q4', true)">Antony</button>
            <button onclick="checkAnswer('q4', false)">Nino</button>
          </div>

          <div id="q5" class="question">
            <p>Qui est le meilleur ami d'Esteban ?</p>
            <button onclick="checkAnswer('q5', true)">Kelyan</button>
            <button onclick="checkAnswer('q5', false)">Antony</button>
            <button onclick="checkAnswer('q5', false)">Nino</button>
          </div>

          <div id="q6" class="question">
            <p>Quelle est la cl√© d'Esteban ?</p>
            <button onclick="checkAnswer('q6', false)">Boussole</button>
            <button onclick="checkAnswer('q6', false)">Montre √† gousset</button>
            <button onclick="checkAnswer('q6', true)">Os de dinosaure</button>
          </div>

          <!-- Infos + messages -->
          <div id="estebanInfo">
            <p><strong>√Çge :</strong> 13 ans</p>
            <p><strong>Monde d‚Äôorigine :</strong> Monde des Yakkas</p>
            <p><strong>Cl√© d‚Äôacc√®s :</strong> Os de dinosaure</p>
            <p><strong>Sp√©cialisation :</strong> Dresseur ‚Äî lien avec Mililou la dragonne</p>
            <p><strong>Statut :</strong> En formation Niv I</p>
          </div>

          <div id="success-message">‚ú® Bravo ! Tu as d√©bloqu√© Esteban ! ‚ú®</div>

          <div id="replay-button">
            <button onclick="restartQuiz()">üîÅ Rejouer le quiz</button>
          </div>
        </div>

        <!-- Boutons bas (m√™mes styles que Rapha√´l) -->
        <nav class="back-button" aria-label="Navigation h√©ros Esteban">
          <a href="8.monde_Yakkas.html">‚ú®D√©couvre mon monde</a>
          <a href="3.les_heros.html">‚Üê Retour aux h√©ros</a>
        </nav>
      </div>
    </section>
  </div>

  <script>
    let correctAnswers = 0;
    const STORAGE_KEY = "quizEstebanDone";

    document.addEventListener("DOMContentLoaded", () => {
      // Si le quiz a d√©j√† √©t√© r√©ussi, on laisse la carte r√©v√©l√©e
      if (localStorage.getItem(STORAGE_KEY) === "true") {
        document.getElementById("cardFlip").classList.add("revealed");
        document.querySelectorAll(".question").forEach(q=>q.style.display="none");
        document.getElementById("estebanInfo").style.display = "block";
        document.getElementById("success-message").style.display = "block";
